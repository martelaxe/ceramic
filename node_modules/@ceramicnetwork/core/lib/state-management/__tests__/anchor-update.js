"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.anchorUpdate = void 0;
const operators_1 = require("rxjs/operators");
const common_1 = require("@ceramicnetwork/common");
async function anchorUpdate(ceramic, stream) {
    const tillAnchored = stream
        .pipe(operators_1.filter((state) => [common_1.AnchorStatus.ANCHORED, common_1.AnchorStatus.FAILED].includes(state.anchorStatus)), operators_1.take(1))
        .toPromise();
    const anchorService = ceramic.context.anchorService;
    await anchorService.anchor();
    await tillAnchored;
}
exports.anchorUpdate = anchorUpdate;
//# sourceMappingURL=anchor-update.js.map